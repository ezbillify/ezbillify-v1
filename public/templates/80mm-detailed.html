<!-- 80mm-detailed.html - Professional Enhanced Design -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tax Invoice - {{COMPANY_NAME}}</title>

  <!-- Modern font stack with Google Fonts - Better readability -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700;900&display=swap" rel="stylesheet">

  <style>
    @page { size: 80mm auto; margin: 2mm; }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      width: 76mm;
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      color: #000;
      font-size: 10px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body { padding: 3mm 3mm 5mm 3mm; background: #fff; }

    /* Typography */
    .center { text-align: center; }
    .bold { font-weight: 600; }
    .semi-bold { font-weight: 500; }

    /* Company Header - Redesigned */
    .company-header {
      text-align: center;
      border-bottom: 3px double #000;
      padding-bottom: 3mm;
      margin-bottom: 3mm;
    }

    .company-name {
      font-size: 18px;
      font-weight: 900;
      letter-spacing: 0.3px;
      text-transform: uppercase;
      color: #000;
      margin-bottom: 1.5mm;
      line-height: 1.2;
    }

    .branch-name {
      font-size: 11px;
      font-weight: 600;
      color: #333;
      margin-bottom: 1.5mm;
    }

    .company-address {
      font-size: 9.5px;
      color: #444;
      line-height: 1.4;
      margin-bottom: 1.5mm;
    }

    .company-contact {
      font-size: 9px;
      color: #666;
      margin-bottom: 1.5mm;
    }

    .company-gstin {
      font-size: 9.5px;
      font-weight: 700;
      color: #000;
      background: #f5f5f5;
      padding: 1mm 3mm;
      display: inline-block;
      border-radius: 3px;
      border: 1px solid #ddd;
    }

    /* Invoice Type Label */
    .invoice-label {
      text-align: center;
      background: #000;
      color: #fff;
      font-size: 11px;
      font-weight: 700;
      padding: 2mm 0;
      margin: 3mm 0;
      letter-spacing: 1.5px;
      text-transform: uppercase;
    }

    /* Document Info */
    .doc-info {
      background: #f8f9fa;
      padding: 2.5mm;
      border-radius: 3px;
      margin-bottom: 3mm;
      border: 1px solid #e0e0e0;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin: 1.5mm 0;
      font-size: 10px;
    }

    .info-label {
      color: #555;
      font-weight: 500;
    }

    .info-value {
      color: #000;
      font-weight: 700;
    }

    /* Customer Section */
    .customer-section {
      background: #fff;
      border: 1.5px solid #ddd;
      padding: 2.5mm;
      border-radius: 3px;
      margin-bottom: 3mm;
    }

    .section-label {
      font-size: 9px;
      font-weight: 700;
      color: #000;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 1.5mm;
      padding-bottom: 1mm;
      border-bottom: 2px solid #000;
    }

    .customer-name {
      font-size: 11px;
      font-weight: 700;
      color: #000;
      margin-bottom: 1mm;
    }

    .customer-details {
      font-size: 9px;
      color: #444;
      line-height: 1.5;
    }

    .customer-details > div {
      margin: 0.8mm 0;
    }

    /* Items Table - Improved Readability */
    .items-table {
      width: 100%;
      border-collapse: collapse;
      margin: 3mm 0;
      font-size: 10px;
    }

    .items-table thead {
      background: #000;
      color: #fff;
    }

    .items-table th {
      padding: 2mm 1mm;
      text-align: left;
      font-size: 9px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border: none;
    }

    .items-table th.text-right { text-align: right; }
    .items-table th.text-center { text-align: center; }

    .items-table tbody tr {
      border-bottom: 1px solid #e0e0e0;
    }

    .items-table tbody tr:last-child {
      border-bottom: 2px solid #000;
    }

    .items-table td {
      padding: 2mm 1mm;
      vertical-align: top;
    }

    .item-name-cell {
      font-weight: 600;
      color: #000;
      font-size: 10px;
    }

    .item-hsn {
      font-size: 8px;
      color: #666;
      margin-top: 0.5mm;
    }

    .item-tax-info {
      font-size: 8px;
      color: #666;
      margin-top: 0.5mm;
      line-height: 1.3;
    }

    .text-right { text-align: right; }
    .text-center { text-align: center; }

    /* Totals Section - Improved Clarity */
    .totals-section {
      margin: 3mm 0;
      background: #f8f9fa;
      padding: 2.5mm;
      border-radius: 3px;
      border: 1px solid #e0e0e0;
    }

    .totals-row {
      display: flex;
      justify-content: space-between;
      margin: 1.5mm 0;
      font-size: 10px;
    }

    .totals-label {
      color: #444;
      font-weight: 500;
    }

    .totals-value {
      color: #000;
      font-weight: 700;
    }

    .total-final {
      background: #000;
      color: #fff;
      margin: 2mm -2.5mm -2.5mm -2.5mm;
      padding: 2.5mm;
      font-size: 13px;
      font-weight: 900;
      border-radius: 0 0 3px 3px;
      letter-spacing: 0.5px;
    }

    /* Payment Section */
    .payment-section {
      text-align: center;
      margin: 3mm 0;
      padding: 2mm;
      background: #f8f9fa;
      border-radius: 2px;
    }

    .qr-code {
      margin: 2mm auto;
      display: block;
      width: 80px;
      height: 80px;
      border: 2px solid #000;
      border-radius: 4px;
      padding: 2mm;
      background: #fff;
    }

    .scan-text {
      font-size: 8px;
      color: #666;
      font-weight: 600;
      margin-top: 1mm;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .bank-details {
      text-align: center;
      font-size: 8.5px;
      color: #333;
      margin-top: 2mm;
      line-height: 1.4;
    }

    /* Notes */
    .notes-section {
      font-size: 8px;
      color: #333;
      margin-top: 3mm;
      padding: 2mm;
      background: #fffbea;
      border-left: 3px solid #f59e0b;
      border-radius: 2px;
    }

    .notes-label {
      font-weight: 700;
      color: #000;
      margin-bottom: 1mm;
    }

    /* Footer */
    .footer {
      text-align: center;
      margin-top: 4mm;
      padding-top: 3mm;
      border-top: 2px dashed #ccc;
    }

    .thank-you {
      font-size: 10px;
      font-weight: 700;
      color: #000;
      margin-bottom: 1mm;
    }

    .powered-by {
      font-size: 7px;
      color: #999;
      margin-top: 1mm;
    }

    /* Dividers */
    .divider-solid {
      border-top: 1px solid #000;
      margin: 2mm 0;
    }

    .divider-dashed {
      border-top: 1px dashed #ccc;
      margin: 2mm 0;
    }

    /* Print Optimization */
    @media print {
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
  </style>
</head>
<body>
  <!-- Company Header - Redesigned Layout -->
  <div class="company-header">
    <!-- Company Name -->
    <div class="company-name">{{COMPANY_NAME}}</div>

    <!-- Branch Name (if exists) -->
    {{#if BRANCH_NAME}}
    <div class="branch-name">{{BRANCH_NAME}}</div>
    {{/if}}

    <!-- Combined Address (Company/Branch) -->
    <div class="company-address">
      {{#if BRANCH_ADDRESS}}
        {{{BRANCH_ADDRESS}}}
      {{else}}
        {{{COMPANY_ADDRESS}}}
      {{/if}}
    </div>

    <!-- Contact Information -->
    <div class="company-contact">
      {{#if BRANCH_PHONE}}
        {{BRANCH_PHONE}}
      {{else}}
        {{COMPANY_PHONE}}
      {{/if}}
      {{#if COMPANY_EMAIL}} | {{COMPANY_EMAIL}}{{/if}}
    </div>

    <!-- GSTIN -->
    {{#if COMPANY_GSTIN}}
    <div class="company-gstin">GSTIN: {{COMPANY_GSTIN}}</div>
    {{/if}}
  </div>

  <!-- Invoice Type Label -->
  <div class="invoice-label">TAX INVOICE</div>

  <!-- Document Info -->
  <div class="doc-info">
    <div class="info-row">
      <div class="info-label">Invoice No.</div>
      <div class="info-value">{{DOCUMENT_NUMBER}}</div>
    </div>
    <div class="info-row">
      <div class="info-label">Date & Time</div>
      <div class="info-value">{{DOCUMENT_DATE}} {{DOCUMENT_TIME}}</div>
    </div>
  </div>

  <!-- Customer Section -->
  <div class="customer-section">
    <div class="section-label">Bill To</div>
    <div class="customer-name">{{CUSTOMER_NAME}}</div>
    <div class="customer-details">
      {{#if CUSTOMER_ADDRESS}}<div>{{{CUSTOMER_ADDRESS}}}</div>{{/if}}
      {{#if CUSTOMER_GSTIN}}<div style="margin-top: 1mm;">GSTIN: {{CUSTOMER_GSTIN}}</div>{{/if}}
      {{#if CUSTOMER_PHONE}}<div>Phone: {{CUSTOMER_PHONE}}</div>{{/if}}
      {{#if CUSTOMER_EMAIL}}<div>Email: {{CUSTOMER_EMAIL}}</div>{{/if}}
    </div>
  </div>

  <!-- Items Table -->
  <table class="items-table">
    <thead>
      <tr>
        <th>Item</th>
        <th class="text-center">Qty</th>
        <th class="text-right">Rate</th>
        <th class="text-right">Amount</th>
      </tr>
    </thead>
    <tbody>
      {{{ITEMS_TABLE}}}
    </tbody>
  </table>

  <!-- Totals Section -->
  <div class="totals-section">
    <div class="totals-row">
      <div class="totals-label">Subtotal</div>
      <div class="totals-value">₹{{SUBTOTAL}}</div>
    </div>

    {{#if DISCOUNT_AMOUNT}}
    <div class="totals-row">
      <div class="totals-label">Discount</div>
      <div class="totals-value">- ₹{{DISCOUNT_AMOUNT}}</div>
    </div>
    {{/if}}

    {{#if CGST_AMOUNT}}
    <div class="totals-row">
      <div class="totals-label">CGST</div>
      <div class="totals-value">₹{{CGST_AMOUNT}}</div>
    </div>
    {{/if}}

    {{#if SGST_AMOUNT}}
    <div class="totals-row">
      <div class="totals-label">SGST</div>
      <div class="totals-value">₹{{SGST_AMOUNT}}</div>
    </div>
    {{/if}}

    {{#if IGST_AMOUNT}}
    <div class="totals-row">
      <div class="totals-label">IGST</div>
      <div class="totals-value">₹{{IGST_AMOUNT}}</div>
    </div>
    {{/if}}

    <div class="totals-row total-final">
      <div>TOTAL AMOUNT</div>
      <div>₹{{TOTAL_AMOUNT}}</div>
    </div>
  </div>

  <!-- Amount in Words -->
  {{#if AMOUNT_IN_WORDS}}
  <div class="notes-section">
    <div class="notes-label">Amount in Words</div>
    <div>{{AMOUNT_IN_WORDS}}</div>
  </div>
  {{/if}}

  <!-- Payment Section -->
  {{#if QR_CODE}}
  <div class="payment-section">
    <img class="qr-code" src="{{QR_CODE}}" alt="Payment QR Code" />
    <div class="scan-text">Scan to Pay</div>
  </div>
  {{/if}}

  {{#if BANK_ACCOUNT_NUMBER}}
  <div class="bank-details">
    <strong>Bank Details:</strong><br/>
    Account: {{BANK_ACCOUNT_NUMBER}}<br/>
    IFSC: {{BANK_IFSC_CODE}}
  </div>
  {{/if}}

  <!-- Notes -->
  {{#if NOTES}}
  <div class="notes-section">
    <div class="notes-label">Notes</div>
    <div>{{NOTES}}</div>
  </div>
  {{/if}}

  <!-- Footer -->
  <div class="footer">
    <div class="thank-you">THANK YOU FOR YOUR BUSINESS!</div>
    <div class="powered-by">Powered by EZbillify</div>
  </div>
</body>
</html>
